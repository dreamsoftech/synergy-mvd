<div class="row page-detail-header">
    <div class="col-md-1 no-padding-horizontal">
        <div class="closeBox">
            <p>
                <a ui-sref="action-items.main">
                    Close <i class="fa fa-caret-right"></i>
                </a>
            </p>
        </div>
    </div>
    <div class="col-md-11">
        <div class="row page-detail-header-wrapper">
            <div class="col-md-11">
                <div class="row">
                    <div class="col-md-12">
                        <h2 class="heading">CHANGE ORDERS</h2>
                        <project-filter current-item="projectFilter"></project-filter>
                    </div>
                </div>
                <div class="row mt30">
                    <div class="col-md-3 col-sm-6">
                        <span class="action-item-text">TOTAL ITEM#: {{ changeOrder.total }}</span>
                        <div class="action-item-count-info">
                            <span class="label label-success">&nbsp;</span>
                            <span class="count">{{ changeOrder.green }}</span>
                            <span class="label label-warning">&nbsp;</span>
                            <span class="count">{{ changeOrder.orange }}</span>
                            <span class="label label-danger">&nbsp;</span>
                            <span class="count">{{ changeOrder.red }}</span>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="action-completed-chart">
                            <div sparkline spark-data="[changeOrder.completed, changeOrder.total - changeOrder.completed]" spark-options="pieOptions"></div>
                        </div>
                        <div>
                            <span class="action-item-text">{{ round(changeOrder.completed.done / changeOrder.completed.total * 100) }}% COMPLETED</span><br>
                            <span class="action-item-value">{{ changeOrder.completed.done }}</span>
                            <span class="action-item-of">of</span>
                            <span class="action-item-value">{{ changeOrder.completed.total }} items</span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-5 no-padding-right">
                                <div class="">
                                    <span class="action-item-text">ITEMS ASSIGNED TO ME</span><br>
                                    <span class="action-item-value">
                                        1 Items
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-7">
                                <div class="row">
                                    <div class="col-md-8 col-sm-6">
                                        <div class="progress progress-medium">
                                            <div class="progress-bar progress-bar-success"
                                                 style="width: {{changeOrder.assignedMe.green.done / changeOrder.assignedMe.green.total * 100}}%;">
                                             </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-6 action-item-progress-text">
                                        {{ changeOrder.assignedMe.green.total }} items
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-sm-6">
                                        <div class="progress progress-medium">
                                            <div class="progress-bar progress-bar-warning"
                                                 style="width: {{changeOrder.assignedMe.orange.done / changeOrder.assignedMe.orange.total * 100}}%;">
                                             </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-6 action-item-progress-text">
                                        {{ changeOrder.assignedMe.orange.total }} items
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-8 col-sm-6">
                                        <div class="progress progress-medium">
                                            <div class="progress-bar progress-bar-danger"
                                                 style="width: {{changeOrder.assignedMe.red.done / changeOrder.assignedMe.red.total * 100}}%;"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-6 action-item-progress-text">
                                        {{ changeOrder.assignedMe.red.total }} items
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-1">
                <div class="btns mt25">
                    <a class="btn btn-success btn-lg" ui-sref="action-items.change-order.new">
                        <i class="fa fa-plus"></i> Add New
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="wrapper wrapper-content animated">
    <div class="com-wrapper">
        <div class="com-charts">
            <div class="row">
                <div class="col-md-2">
                    <canvas doughnutchart options="changeOrder.chart_options" class="ml25" data="changeOrder.chart_data" height="90" width="90"></canvas>
                </div>
                <div class="col-md-6">
                    <div class="text-default">TOTAL CHANGE ORDERS</div>
                    <div class="font-regular value">{{changeOrder.overview.total | currency:'$':0 }}</div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="label label-warning">&nbsp;</div>
                            <small class="text-default">CHANGE ORDERS IN PROCESS</small>
                            <div class="row">
                                <div class="col-xs-4">
                                    <div class="text-muted font-regular">Count</div>
                                    <div class="value font-regular">1</div>
                                </div>
                                <div class="col-xs-8">
                                    <div class="text-muted font-regular">Amount</div>
                                    <div class="value font-regular">$1,200</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="label label-success">&nbsp;</div>
                            <small class="text-default">CHANGE ORDERS COMPLETED</small>
                            <div class="row">
                                <div class="col-xs-4">
                                    <div class="text-muted font-regular">Count</div>
                                    <div class="value font-regular">2</div>
                                </div>
                                <div class="col-xs-8">
                                    <div class="text-muted font-regular">Amount</div>
                                    <div class="value font-regular">$128,572</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row com-table mt30">
            <div class="col-md-12">
                <h3 class="pull-left">Actions Required by Me</h3>
                <div class="btns pull-right">
                    <a href="" class="btn btn-default" data-toggle="dropdown">
                        Filter by <i class="fa fa-chevron-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right action-menu" role="menu">
                        <li><a href="">Date</a></li>
                        <li><a href="">Worker</a></li>
                        <li><a href="">Tag</a></li>
                        <li><a href="">Location</a></li>
                        <li><a href="">Project</a></li>
                    </ul>
                </div>
                <div class="search-field">
                    <i class="fa fa-search"></i>
                    <input type="text text-default" placeholder="Search by date, worker, tag, location or project" class="form-control round">
                </div>
                <div class="clearfix"></div>
                <div class="table-responsive">
                    <table class="table table-condensed table-bordered">
                        <thead>
                            <th class="flag"></th>
                            <th class="title">Name & Project</th>
                            <th class="due-date">Date Submitted</th>
                            <th class="responsible">Responsible</th>
                            <th class="initiator">Initiator</th>
                            <th class="sow">SOW</th>
                            <th class="amount">Impact</th>
                            <th class="staus">Status</th>
                        </thead>
                        <tbody>
                          <tr ng-repeat="row in changeOrder.listRequiredByMe">
                            <td class="flag">
                                <span>
                                    <img ng-show="row.flag == 'red'" src="assets/img/red_icon.png">
                                    <img ng-show="row.flag == 'yellow'" src="assets/img/yellow _icon.png">
                                    <img ng-show="row.flag == 'green'" src="assets/img/flag_green.png">
                                    <img ng-show="row.flag == 'canceled'" src="assets/img/failed.png">
                                    <img ng-show="row.flag == 'completed'" src="assets/img/completed.png">
                                    <img ng-show="row.flag == 'draft'" src="assets/img/edit_circle.png">
                                </span>
                            </td>
                            <td class="title"><a href="javascript:void(0)" ui-sref="action-items.change-order.in-process">{{ row.title }}</a><br><small>{{ row.type}}</small></td>
                            <td class="order-by-date">{{ row.due_date }}</td>
                            <td class="responsible"><a href="">{{ row.responsible.name }}</a><br><small>{{ row.responsible.company }}</small></td>
                            <td class="initiator"><a href="">{{ row.initiator.name }}</a><br><small>{{ row.initiator.company }}</small></td>
                            <td class="sow"><a>{{ row.sow }}</a><br><small>{{row.sow_completed}}% Completed</small></td>
                            <td class="amount">${{ row.amount | number:2 }}</td>
                            <td class="status">
                                <span class="label" ng-class="{'in-process': row.status[0] == 'In Process',
                                                               'draft': row.status[0] == 'Draft',
                                                               'pending': row.status[0] == 'pending'
                                                               || row.status[0] == 'Distrubuted',
                                                               'completed': row.status[0] == 'Completed' 
                                                               || row.status[0] == 'Approved'}">
                                    {{ row.status[0] }}
                                </span><br>
                                <!-- <small ng-show="row.status[1] != '-'">{{ row.status[1] * 100  }}% Completed</small> -->
                            </td>
                          </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6"></td>
                                <td>
                                    <span>Total</span>
                                    <p>$0</p>
                                </td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <div class="row com-table">
            <div class="col-md-12">
                <h3>Actions Required by Others</h3>
                <div class="table-responsive">
                    <table class="table table-condensed table-bordered">
                        <thead>
                            <th class="flag"></th>
                            <th class="title">Title</th>
                            <th class="due-date">Date Submitted</th>
                            <th class="responsible">Responsible</th>
                            <th class="initiator">Initiator</th>
                            <th class="sow">SOW</th>
                            <th class="amount">Impact</th>
                            <th class="staus">Status</th>
                        </thead>
                        <tbody>
                          <tr ng-repeat="row in changeOrder.listRequiredByOthers">
                            <td class="flag">
                                <span>
                                    <img ng-show="row.flag == 'red'" src="assets/img/red_icon.png">
                                    <img ng-show="row.flag == 'yellow'" src="assets/img/yellow _icon.png">
                                    <img ng-show="row.flag == 'green'" src="assets/img/flag_green.png">
                                    <img ng-show="row.flag == 'canceled'" src="assets/img/failed.png">
                                    <img ng-show="row.flag == 'completed'" src="assets/img/completed.png">
                                    <img ng-show="row.flag == 'draft'" src="assets/img/edit_circle.png">
                                </span>
                            </td>
                            <td class="title"><a href="javascript:void(0)" ui-sref="action-items.change-order.in-process">{{ row.title }}</a><br><small>{{ row.type}}</small></td>
                            <td class="order-by-date">{{ row.due_date }}</td>
                            <td class="responsible"><a href="">{{ row.responsible.name }}</a><br><small>{{ row.responsible.company }}</small></td>
                            <td class="initiator"><a href="">{{ row.initiator.name }}</a><br><small>{{ row.initiator.company }}</small></td>
                            <td class="sow"><a>{{ row.sow }}</a><br><small>{{row.sow_completed}}% Completed</small></td>
                            <td class="amount">${{ row.amount | number:2 }}</td>
                            <td class="status">
                                <span class="label" ng-class="{'in-process': row.status[0] == 'In Process',
                                                               'draft': row.status[0] == 'Draft',
                                                               'pending': row.status[0] == 'pending'
                                                               || row.status[0] == 'Distrubuted',
                                                               'completed': row.status[0] == 'Completed' 
                                                               || row.status[0] == 'Approved'}">
                                    {{ row.status[0] }}
                                </span><br>
                                <!-- <small ng-show="row.status[1] != '-'">{{ row.status[1] * 100  }}% Completed</small> -->
                            </td>
                          </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6"></td>
                                <td>
                                    <span>Total</span>
                                    <p>$0</p>
                                </td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <div class="row com-table">
            <div class="col-md-12">
                <h3>Drafts</h3>
                <div class="table-responsive">
                    <table class="table table-condensed table-bordered">
                        <thead>
                            <th class="flag"></th>
                            <th class="title">Title</th>
                            <th class="due-date">Date Submitted</th>
                            <th class="responsible">Responsible</th>
                            <th class="initiator">Initiator</th>
                            <th class="sow">SOW</th>
                            <th class="amount">Impact</th>
                            <th class="staus">Status</th>
                        </thead>
                        <tbody>
                          <tr ng-repeat="row in changeOrder.listDrafts">
                            <td class="flag">
                                <span>
                                    <img ng-show="row.flag == 'red'" src="assets/img/red_icon.png">
                                    <img ng-show="row.flag == 'yellow'" src="assets/img/yellow _icon.png">
                                    <img ng-show="row.flag == 'green'" src="assets/img/flag_green.png">
                                    <img ng-show="row.flag == 'canceled'" src="assets/img/failed.png">
                                    <img ng-show="row.flag == 'completed'" src="assets/img/completed.png">
                                    <img ng-show="row.flag == 'draft'" src="assets/img/edit_circle.png">
                                </span>
                            </td>
                            <td class="title"><a href="javascript:void(0)" ui-sref="action-items.change-order.in-process">{{ row.title }}</a><br><small>{{ row.type}}</small></td>
                            <td class="order-by-date">{{ row.due_date }}</td>
                            <td class="responsible"><a href="">{{ row.responsible.name }}</a><br><small>{{ row.responsible.company }}</small></td>
                            <td class="initiator"><a href="">{{ row.initiator.name }}</a><br><small>{{ row.initiator.company }}</small></td>
                            <td class="sow"><a>{{ row.sow }}</a><br><small>{{row.sow_completed}}% Completed</small></td>
                            <td class="amount">${{ row.amount | number:2 }}</td>
                            <td class="status">
                                <span class="label" ng-class="{'in-process': row.status[0] == 'In Process',
                                                               'draft': row.status[0] == 'Draft',
                                                               'pending': row.status[0] == 'pending'
                                                               || row.status[0] == 'Distrubuted',
                                                               'completed': row.status[0] == 'Completed' 
                                                               || row.status[0] == 'Approved'}">
                                    {{ row.status[0] }}
                                </span><br>
                                <!-- <small ng-show="row.status[1] != '-'">{{ row.status[1] * 100  }}% Completed</small> -->
                            </td>
                          </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6"></td>
                                <td>
                                    <span>Total</span>
                                    <p>$0</p>
                                </td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <div class="row com-table">
            <div class="col-md-12">
                <h3>Completed</h3>
                <div class="table-responsive">
                    <table class="table table-condensed table-bordered cpo-table">
                        <thead>
                            <th class="flag"></th>
                            <th class="title">Title</th>
                            <th class="due-date">Date Submitted</th>
                            <th class="responsible">Responsible</th>
                            <th class="initiator">Initiator</th>
                            <th class="sow">SOW</th>
                            <th class="amount">Impact</th>
                            <th class="staus">Status</th>
                        </thead>
                        <tbody>
                          <tr ng-repeat="row in changeOrder.listCompleted">
                            <td class="flag">
                                <span>
                                    <img ng-show="row.flag == 'red'" src="assets/img/red_icon.png">
                                    <img ng-show="row.flag == 'yellow'" src="assets/img/yellow _icon.png">
                                    <img ng-show="row.flag == 'green'" src="assets/img/flag_green.png">
                                    <img ng-show="row.flag == 'canceled'" src="assets/img/failed.png">
                                    <img ng-show="row.flag == 'completed'" src="assets/img/completed.png">
                                    <img ng-show="row.flag == 'draft'" src="assets/img/edit_circle.png">
                                </span>
                            </td>
                            <td class="title"><a href="javascript:void(0)" ui-sref="action-items.change-order.in-process">{{ row.title }}</a><br><small>{{ row.type}}</small></td>
                            <td class="order-by-date">{{ row.due_date }}</td>
                            <td class="responsible"><a href="">{{ row.responsible.name }}</a><br><small>{{ row.responsible.company }}</small></td>
                            <td class="initiator"><a href="">{{ row.initiator.name }}</a><br><small>{{ row.initiator.company }}</small></td>
                            <td class="sow"><a>{{ row.sow }}</a><br><small>{{row.sow_completed}}% Completed</small></td>
                            <td class="amount">${{ row.amount | number:2 }}</td>
                            <td class="status">
                                <span class="label" ng-class="{'in-process': row.status[0] == 'In Process',
                                                               'draft': row.status[0] == 'Draft',
                                                               'pending': row.status[0] == 'pending'
                                                               || row.status[0] == 'Distrubuted',
                                                               'completed': row.status[0] == 'Completed' 
                                                               || row.status[0] == 'Approved'}">
                                    {{ row.status[0] }}
                                </span><br>
                                <!-- <small ng-show="row.status[1] != '-'">{{ row.status[1] * 100  }}% Completed</small> -->
                            </td>
                          </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6"></td>
                                <td>
                                    <span>Total</span>
                                    <p>$128,572.00</p>
                                </td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
